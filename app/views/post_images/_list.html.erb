<% post_images.each do |post_image| %><!-- viewから渡される変数を使えるようにするため@を外した　-->
<div>
  <%= link_to post_image_path(post_image.id) do %>
    <%= attachment_image_tag post_image, :image %><!--post_imageに保存されているimageカラムから情報を引き出している。-->
  <% end %>

  <p>投稿ユーザー画像:<%= attachment_image_tag post_image.user, :profile_image, :fill, 60, 60, fallback: "no_image.jpg" %></p>
  <!--attachment_image_tagは、refile側が用意したヘルパーで、imgタグを作成してくれます。post_image変数のimage_idに保存された画像のimgタグを生成します。
    post_imagesフォルダのshow.html.erbファイルでは、画像を保持しているのはpost_commentモデルに紐づけられたuserモデルです。attachment_image_tagの右隣には、post_comment.userを記述します。
    attachment_image_tag 保存先インスタンス名, :保存先カラム名, :サイズ（横幅,高さ）, 画像拡張子, 代替画像:fill画像の縦横サイズを指定します。単位はpxです。-->

  <p>ショップ名:<%= post_image.shop_name %></p>
  <p>説明:<%= post_image.caption %></p>
  <p>ユーザーネーム:<%= post_image.user.name %></p>
  <p><%= link_to "#{post_image.post_comments.count}", post_image_path(post_image.id) %></p>
</div>
<% end %>
<%= paginate post_images %>